<!doctype html>

<html>

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=0">
  <meta name="mobile-web-app-capable" content="yes">
  <title>Scan QR</title>

  <link rel="apple-touch-icon" sizes="114x114" href="assets/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="assets/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="assets/favicon/favicon-16x16.png">
  <link rel="manifest" href="assets/favicon/site.webmanifest">
  <link rel="mask-icon" href="assets/favicon/safari-pinned-tab.svg" color="#5bbad5">
  <link rel="shortcut icon" href="assets/favicon/favicon.ico">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="msapplication-config" content="assets/favicon/browserconfig.xml">
  <meta name="theme-color" content="#ffffff">


  <script type="text/javascript" src="lib/instascan.min.js"></script>
  <script type="text/javascript" src="lib/qrcode.min.js"></script>
  <script type="text/javascript" src="lib/moment.min.js"></script>
  <script type="text/javascript" src="assets/js/toast.js"></script>
  <script type="text/javascript" src="assets/js/qr.js"></script>
  <script type="text/javascript" src="assets/js/timer.js"></script>
  <script type="text/javascript" src="assets/js/storage.js"></script>
  <script type="text/javascript" src="assets/js/session.js"></script>
  <script type="text/javascript" src="assets/js/journal.js"></script>

    <script type="text/javascript" src="assets/js/scan.js"></script>
  <link href="assets/css/scan-style.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
</head>

<body>

  <!-- NAVIGATION -->
  <nav hidden>
    <div class="title-bar" onclick="UI.toggleNav(event)">
      <h3 class="with-margin"><i class="fas fa-bars"></i> &nbsp;Menu</h3>
    </div>

    <!-- NAVIGATION CONTENT -->
    <div class="flex scroll">
      <ul>
        <li><i class="fas fa-camera"></i> <strong>Camera</strong></li>

        <li>
          <select class="js-camera-options">
            <option>Select Camera</option>
          </select>
        </li>
      </ul>

      <ul>
        <li><i class="fas fa-calendar-alt"></i> <strong>Session</strong></li>

        <li>
          <span class="form-hint">Select session date:</span>
          <input type="date" data-date/>
        </li>
      </ul>

      <ul>
        <li><i class="fas fa-database"></i> <strong>Data</strong></li>

        <li><button onclick="dd.tabulateData(); UI.toggleNav(event);"><i class="fas fa-list-alt"></i> list</button></li>
        <li><button onclick="store.exportCSV()"><i class="fas fa-file-export"></i> Export CSV</button></li>
        <li hidden data-migrate><button onclick="store.migrate()"><i class="fas fa-directions"></i> Migrate</button></li>
        <li><button onclick="dd.clearLog(); store.purge();" class="button-purge"><i class="fas fa-trash"></i> purge</button></li>
      </ul>

      <ul>
        <li><i class="fas fa-chess-board"></i> <strong>QR</strong></li>

        <li><button onclick="UI.toggleNav(event); UI.showDisplays(['.js-qr-generate']); QR.makeCode(qrinput.value, {qrid:'qr-generate'});"><i class="fas fa-cog"></i> Generate</button>
      </ul>
    </div>
  </nav>

  <!-- TOAST -->
  <div class="js-toast" hidden>toast!</div>

  <div class="content-wrapper">
    <!-- TITLE BAR  -->
    <div class="title-bar" onclick="UI.toggleNav(event);">
      <h3 class="with-margin">
        <span class="row">
        <i class="fas fa-caret-square-down"></i>&nbsp; Spartans<span class="flex"></span><span data-session-display></span>
      </span>
      </h3>
    </div>

    <div class="js-stopwatch" hidden data-display>
      <div class="title-bar center">
        <span class="flex"></span>
        <code class="stopwatch-main-text grow" data-timer-display></code>
        <span class="flex"></span>
      </div>

    </div>

    <!-- MAIN CONTENT  -->
    <div class="js-content content">

        <div class="js-stopwatch-laps" hidden data-display>
        </div>
      <div class="js-manual-form with-margin" hidden data-display>
        <h3>Manual Entry</h3>

        <div class="row with-margin-bottom">
          <div class="col full-width">
            <label>Name</label>
            <input type="text" name="name">
          </div>
        </div>
        <div class="row">
          <div class="col full-width">
            <label>Telephone/Email</label>
            <input type="text" name="id">
          </div>
        </div>

        <div class="row">
          <button onclick="store.discardManualEntry();"><i class="fas fa-trash"></i></button>
          <span class="grow"></span>
          <button onclick="store.commitManualEntry();" class="primary"><i class="fas fa-save"></i> Save</button>
        </div>
      </div>

      <div class="js-preview" style="text-align: center; margin: 1em;" data-display>
        <video id="preview"></video>
      </div>

      <div class="js-qr-generate with-margin" hidden data-display>
        <h3 class="row">QR:Generate <span class="grow"></span> <a onclick="UI.showDisplays(['.js-preview', '.js-data']);"><i class="fas fa-times-circle"></i></a></h3>
        <div id="qr-generate" class="with-margin">
        </div>
        <input id="qrinput" class="with-margin" oninput="QR.makeCode(this.value, {qrid: 'qr-generate'})" />
      </div>

      <div class="js-scan-started with-margin" hidden data-display>
        <h3>Capturing In Progress</h3>
        <div class="row">
          <div class="col full-width">
            <label>Name</label>
            <input class="js-scan-name" type="text" name="name" readonly>
          </div>
        </div>
        <div class="row">
          <div class="col full-width">
            <label>Sequence</label>
            <input class="js-scan-seq" type="text" name="sequence" readonly>
          </div>
        </div>
        <div class="row">
          <button onclick="scanState.reset(); scanState.render();" class="js-scan-discard"><i class="fas fa-trash"></i></button>
          <span class="grow"></span>
          <button onclick="scanState.reset(); scanState.render(); UI.showDisplays(['.js-data', '.js-preview']); this.setAttribute('hidden', true);"
              class="js-scan-ok primary" hidden><i class="fas fa-save"></i> OK</button>
        </div>
      </div>

      <div class="js-data with-margin with-border-top" data-display>
        <pre id="log"></pre>
        <div class="js-datatable"></div>
      </div>


    </div>

    <!-- STOPWATCH ACTIONS -->
    <div class="js-stopwatch-actions" hidden data-display>
      <div class="row">
        <button onclick="Timer.start();">Timer</button>
        <button onclick="Timer.stop();"><i class="fas fa-stop"></i></button>
        <span class="flex"></span>
        <button onclick="log(Timer.lap().display);">Lap</button>
      </div>
    </div>

    <!-- INSTRUCTION BAR  -->
    <div class="js-instruction instruction-bar">
      <i class="fas fa-info"></i> Loading...
    </div>

    <!--  ACTION BAR  -->
    <div class="action-bar">
      <div class="row">
      <button class="js-button-scan primary" onclick="optics.scan();">
        <i class="fas fa-expand"></i>
      </button>

      <button class="js-button-stop-scan primary" onclick="optics.stopScan();" hidden>
        <i class="fas fa-stop"></i>
      </button>

      <button>
        <i class="fas fa-stopwatch" onclick="UI.showDisplays(['.js-stopwatch', '.js-stopwatch-actions', '.js-stopwatch-laps']); Timer.renderTable();"></i>
      </button>

            <span class="flex"></span>

            <span class="flex"></span>

      <button onclick="dd.clearLog();">
        <i class="fas fa-eraser"></i>
      </button>

      <button onclick="UI.showManualForm();">
        <i class="fas fa-user-plus"></i>
      </button>
    </div>
    </div>
    <!-- END -->
  </div>

</body>

</html>
